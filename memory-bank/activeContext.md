# Active Context

- Built scaffold: Express backend (serving static + health) and Vite + React frontend with Tailwind, green-forward theme, and router. Kick proxy routes were removed per request; frontend fetches Kick v1 directly.
- Added client-side JSON guard + mock fallbacks (slugs `ebonivon`, `eray`) so Cloudflare/CORS HTML responses donâ€™t break the app; optional `VITE_KICK_USE_MOCK=1` can force mock data. Removed backend Kick client/proxy file per request; only direct Kick v1 fetches remain on the frontend. Firebase config now pulled from Vite env vars (see `client/.env.example`).
- Auth/storage: Firebase Auth/Firestore wiring with env-driven config and guest fallback that keeps follows in cookies; AuthContext guards guest mode when Firebase config is missing.
- UI/pages: Landing (login/register + guest), Follows (add/remove channels, status cards), Player (left follow rail, Plyr-based video player, chat-open button). Playback now relies on native HLS support; quality stays automatic (no manual level selector).
- Observations: Kick API calls still return Cloudflare 403 via curl; proxy includes browser-like headers and optional `KICK_COOKIES` env to bypass but needs real session/cookie to verify with live data. Added `KICK_USE_MOCK`/mock response for the `ebonivon` slug to enable local testing without API access.
- Next: connect real Firebase credentials, test with real Kick channels + optional cookie header, polish follow status polling cadence if needed. Frontend Kick calls now hit Kick API directly (`https://kick.com/api/v1/channels/:slug`) per request. Backend proxy trimmed to v1 channel endpoint only; playback reuses the same response.
- Player maintenance: ensured `client/src/components/HlsPlayer.jsx` is the canonical player file; now uses Plyr + Hls.js with jump-to-live behavior, manual quality options (auto + per-resolution), and clean teardown of the video element between loads.
- New UX: logged-in/guest users auto-redirect to the follows page, follow cards sort live streams to the top, and the player page now lists only currently live channels (auto-selecting a live one when available).
- Latest UX polish: follow cards now sort by live status + viewer count (most watched at the top) and show clearer status/viewer/category icons. Player sidebar uses the same ordering for all follows (not just live), respects the clicked slug even if offline, and opens the selected broadcaster instead of forcing the top live item. The player component (HlsPlayer) was stabilized/renamed, now resets sources cleanly when switching broadcasters and shows an offline/loading message when no playback URL is available.
- Player controls: restored Plyr overlay + Hls.js integration in `client/src/components/HlsPlayer.jsx` with manual quality selection (auto + per-resolution options), jump-to-live behavior, and clean teardown between broadcaster switches.
